var k=Object.defineProperty,E=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var g=(a,e,t)=>e in a?k(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,c=(a,e)=>{for(var t in e||(e={}))T.call(e,t)&&g(a,t,e[t]);if(f)for(var t of f(e))z.call(e,t)&&g(a,t,e[t]);return a},d=(a,e)=>E(a,N(e));import{r as u,f as P,O as i,j as n,a as S,al as L,S as M,B as C,cM as $,aK as I,av as K,T as O}from"./vendor.ac9d3824.js";import{u as J}from"./index.e3fc6de9.js";import{i as R,s as l,S as q}from"./form.76711e2e.js";import{getColumns as G}from"./constants.c166cd3c.js";const{Title:H}=O;function Y(){const a=J(R),e=async(s,r)=>{switch(r){case"view":i.info(`\u67E5\u770B\u5F39\u836F\uFF1A${s.name}`);break;case"edit":i.info(`\u7F16\u8F91\u5F39\u836F\uFF1A${s.name}`);break;case"delete":i.warning(`\u5220\u9664\u5F39\u836F\uFF1A${s.name}`);break}},t=u.exports.useMemo(()=>G(a,e),[a]),[x,b]=u.exports.useState([]),[o,m]=u.exports.useState({sizeCanChange:!0,showTotal:!0,pageSize:10,current:1,pageSizeChangeResetCurrent:!0}),[y,F]=u.exports.useState(!0),[p,A]=u.exports.useState({});u.exports.useEffect(()=>{B()},[o.current,o.pageSize,JSON.stringify(p)]);function B(){const{current:s,pageSize:r}=o;F(!0),P.get("/api/weapons/ammunition",{params:c({page:s,pageSize:r},p)}).then(h=>{b(h.data.list),m(d(c({},o),{current:s,pageSize:r,total:h.data.total}))}).catch(()=>{i.error("\u83B7\u53D6\u5F39\u836F\u6570\u636E\u5931\u8D25")}).finally(()=>{F(!1)})}function v({current:s,pageSize:r}){m(d(c({},o),{current:s,pageSize:r}))}function w(s){A(s),m(d(c({},o),{current:1}))}const j=()=>{i.info("\u6DFB\u52A0\u65B0\u5F39\u836F")},D=()=>{i.info("\u5BFC\u51FA\u5F39\u836F\u6570\u636E")};return n("div",{className:l.container,children:S(L,{children:[n(H,{heading:6,children:a["ammunition.title"]}),n(q,{onSearch:w}),S("div",{className:l.toolbar,children:[n("div",{className:l["toolbar-left"],children:n(M,{children:n(C,{type:"primary",icon:n($,{}),onClick:j,children:"\u6DFB\u52A0\u5F39\u836F"})})}),n("div",{className:l["toolbar-right"],children:n(C,{icon:n(I,{}),onClick:D,children:"\u5BFC\u51FA\u6570\u636E"})})]}),n("div",{className:l["table-wrapper"],children:n(K,{rowKey:"id",loading:y,onChange:v,pagination:o,columns:t,data:x,scroll:{x:2e3,y:600},borderCell:!0,stripe:!0})})]})})}export{Y as default};
