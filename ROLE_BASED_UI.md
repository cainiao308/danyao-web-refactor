# 角色基础的界面系统

## 功能概述

基于用户角色显示不同的界面布局：

- **管理员角色**：显示原有的管理后台界面（侧边栏导航）
- **普通用户角色**：显示新的搜索导向界面（顶部导航）

## 角色切换机制

### 技术实现

系统通过 `localStorage` 中的 `userRole` 字段来判断用户角色：

- `admin`：管理员，显示完整的管理后台
- `user`：普通用户，显示搜索导向界面

### 组件架构

```
src/components/RoleRouter/
└── index.tsx                 # 角色路由组件，根据角色切换布局

src/components/UserLayout/    # 普通用户布局
├── index.tsx                # 主布局组件
└── style/
    └── index.module.less    # 布局样式

src/components/SearchBox/     # Google风格搜索框
├── index.tsx                # 搜索组件
└── style/
    └── index.module.less    # 搜索框样式
```

## 普通用户界面特性

### 1. 顶部水平导航

采用您提供的 Menu 样式，包含 5 个主要功能：

- 首页
- 国家检索
- 弹药检索
- 火炮检索
- 产品对比
- AI 问答

### 2. Google 风格搜索界面

- **居中的大型搜索框**
- **智能搜索建议**
- **热门搜索标签**
- **快速访问卡片**

### 3. 页面结构

```
src/pages/user/
├── home/                    # 用户首页
│   ├── index.tsx           # 主页面（Google风格）
│   └── style/
│       └── index.module.less
├── country-search/          # 国家检索
│   └── index.tsx
├── ammunition-search/       # 弹药检索
│   └── index.tsx
├── artillery-search/        # 火炮检索
│   └── index.tsx
├── product-compare/         # 产品对比
│   └── index.tsx
└── ai-chat/                # AI问答
    └── index.tsx
```

## 功能详情

### 🏠 用户首页

- **Google 风格搜索框**：智能判断搜索内容类型并跳转到对应页面
- **快速访问卡片**：5 个功能模块的快速入口
- **热门搜索标签**：常用搜索词快速访问
- **响应式设计**：适配各种屏幕尺寸

### 🌍 国家检索

- **按国家查找军贸产品**
- **显示国家基本信息、主要产品、制造商**
- **支持中英文搜索**

### 🚀 弹药检索

- **简化的弹药搜索界面**
- **数据来源于管理后台的弹药数据**
- **支持多维度筛选**
- **URL 参数支持**（从首页搜索跳转）

### 🎯 火炮检索

- **简化的火炮搜索界面**
- **数据来源于管理后台的火炮数据**
- **支持多维度筛选**
- **URL 参数支持**（从首页搜索跳转）

### ⚖️ 产品对比

- **最多选择 4 个产品进行对比**
- **表格形式展示对比结果**
- **支持添加/删除对比产品**
- **直观的差异展示**

### 🤖 AI 问答

- **智能问答聊天界面**
- **预设快速问题**
- **实时对话模拟**
- **军贸产品知识库支持**

## 设计特色

### 视觉设计

- **现代简洁的界面**：采用 Arco Design 组件
- **蓝色主题**：与原系统保持一致
- **渐变背景**：提升视觉效果
- **卡片式布局**：清晰的信息层次

### 用户体验

- **搜索导向**：符合普通用户的使用习惯
- **智能跳转**：根据搜索内容自动判断目标页面
- **快速访问**：多种方式快速找到所需功能
- **响应式**：完美适配移动端

### 技术特性

- **TypeScript 支持**：完整的类型检查
- **组件化设计**：高度复用的组件
- **样式隔离**：CSS Modules 避免样式冲突
- **性能优化**：按需加载和虚拟滚动

## 角色切换方法

### 在浏览器控制台切换角色：

```javascript
// 切换到管理员
localStorage.setItem('userRole', 'admin');
window.location.reload();

// 切换到普通用户
localStorage.setItem('userRole', 'user');
window.location.reload();
```

### 在 NavBar 组件中切换：

原有的角色切换功能依然可用，会在管理员和用户之间切换。

## 路由配置

### 管理员路由（原有）

- `/dashboard/*` - 仪表板
- `/weapons/*` - 武器装备管理
- `/list/*` - 列表页面
- `/form/*` - 表单页面
- 等等...

### 普通用户路由（新增）

- `/user/home` - 用户首页
- `/user/country-search` - 国家检索
- `/user/ammunition-search` - 弹药检索
- `/user/artillery-search` - 火炮检索
- `/user/product-compare` - 产品对比
- `/user/ai-chat` - AI 问答

## 数据共享

普通用户界面会复用管理后台的数据：

- **弹药数据**：来自 `/api/weapons/ammunition`
- **火炮数据**：来自 `/api/weapons/artillery`
- **用户信息**：来自 Redux store
- **国际化**：共享语言配置

## 扩展性

系统具有良好的扩展性：

1. **新增用户功能**：在 `src/pages/user/` 下添加新页面
2. **修改导航菜单**：在 `UserLayout` 组件中配置
3. **添加新角色**：在 `RoleRouter` 中扩展判断逻辑
4. **自定义主题**：通过 Less 变量进行主题定制

## 使用说明

1. **默认角色**：新用户默认为管理员角色
2. **切换方式**：通过原有的角色切换功能或浏览器控制台
3. **数据同步**：两种界面共享相同的后端数据
4. **权限控制**：可扩展为基于后端的权限验证

这个角色基础的界面系统为不同类型的用户提供了最适合的交互体验，管理员专注于数据管理，普通用户专注于信息查询和对比。
